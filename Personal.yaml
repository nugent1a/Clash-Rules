# å…¨å±€é…ç½® 
mixed-port: 7890
allow-lan: true
bind-address: "*"
unified-delay: true
tcp-concurrent: true
log-level: error
ipv6: true
keep-alive-idle: 600
keep-alive-interval: 15
profile:
  store-selected: true
  store-fake-ip: true
global-client-fingerprint: chrome

#GeoX
geodata-mode: true
geodata-loader: standard
geo-auto-update: true
geo-update-interval: 12
geox-url:
  geoip: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat
  geosite: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat
  mmdb: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb
  asn: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/GeoLite2-ASN.mmdb

# å—…æ¢
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"

# å…¥ç«™
tun:
  enable: true
  stack: mixed
  device: utun
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  dns-hijack:
    - any:53
    - tcp://any:53

# DNSæ¨¡å—
dns:
  enable: true
  prefer-h3: false
  ipv6: true
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  nameserver-policy:
    "geosite:cn,private":
    #å±±ä¸œè”é€šDNS
      - 202.102.128.68
      - 202.102.134.68
    #å…¬å…±DNS
      - 119.29.29.29
      - 223.5.5.5

  fake-ip-filter:
    - "*.lan"
    - "*.local"
    - "*.arpa"
    - "time.*.com"
    - "ntp.*.com"
    - "time.*.com"
    - "+.market.xiaomi.com"
    - "localhost.ptlogin2.qq.com"
    - "*.msftncsi.com"
    - "www.msftconnecttest.com"

proxy-groups:

  - name: ğŸ”° èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies: [DIRECT, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹]
      
  - name: ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
    type: select
    proxies: [DIRECT]
    use:
      - Fusion

  - name: ğŸ’¡ AI
    type: select
    proxies: [DIRECT, ğŸ”° èŠ‚ç‚¹é€‰æ‹©, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹]

  - name: ğŸ€ Google
    type: select
    proxies: [DIRECT, ğŸ”° èŠ‚ç‚¹é€‰æ‹©, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹]

  - name: ğŸª™ Crypto
    type: select
    proxies: [DIRECT, ğŸ”° èŠ‚ç‚¹é€‰æ‹©, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹]

  - name:  ğŸ­ ä¼ªè£…
    type: select
    proxies: [DIRECT, ğŸ”° èŠ‚ç‚¹é€‰æ‹©, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]
    use:
      - Guise

  - name: ğŸªŸ å¾®è½¯æœåŠ¡
    type: select
    proxies: [DIRECT, ğŸ”° èŠ‚ç‚¹é€‰æ‹©, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹]

  - name: ğŸ è‹¹æœæœåŠ¡
    type: select
    proxies: [DIRECT, ğŸ”° èŠ‚ç‚¹é€‰æ‹©, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹]

  - name: ğŸ¯ å…¨çƒç›´è¿
    type: select
    proxies: [DIRECT, ğŸ”° èŠ‚ç‚¹é€‰æ‹©, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  - name: ğŸ”€ å›é€€è·¯ç”±
    type: select
    proxies: [DIRECT, ğŸ”° èŠ‚ç‚¹é€‰æ‹©, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: url-test
    include-all: true
    tolerance: 50
    interval: 300
    filter: "(æ¸¯|HK|hk|Hong Kong|HongKong|hongkong)"

  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    type: url-test
    include-all: true
    tolerance: 50
    interval: 300
    filter: "(å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan)"

  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
    type: select
    include-all: true
    tolerance: 50
    interval: 300
    filter: "^(?!.*(0\\.5å€ç‡|0\\.5x|0\\.5å€|å€ç‡0\\.5x)).*(æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore).*$"

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    include-all: true
    tolerance: 50
    interval: 300
    filter: "(æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP|Japan)"

  - name: ğŸ‡ªğŸ‡º æ¬§æ´²èŠ‚ç‚¹
    type: url-test
    include-all: true
    tolerance: 50
    interval: 300
    filter: "(?i)(EU|å¾·å›½|Germany|DE|æ³•å›½|France|FR|è‹±å›½|UK|è·å…°|Netherlands|NL|è¥¿ç­ç‰™|Spain|ç‘å£«|Switzerland|ç‘å…¸|Sweden|å¸Œè…Š|Greece|ä¿„ç½—æ–¯|Russia|RU|è«æ–¯ç§‘|Moscow|åœŸè€³å…¶|Turkey)"

  - name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
    type: url-test
    include-all: true
    tolerance: 150
    interval: 300
    filter: "(ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States)"

### è§„åˆ™é›†é”šç‚¹
RuleSet_classical_text: &RuleSet_classical_text {type: http, behavior: classical, interval: 43200, format: text}
#RuleSet_domain_mrs: &RuleSet_domain_mrs {type: http, behavior: domain, interval: 43200, format: mrs}
#RuleSet_domain_text: &RuleSet_domain_text {type: http, behavior: domain, interval: 43200, format: text}
#RuleSet_ipcidr_mrs: &RuleSet_ipcidr_mrs {type: http, behavior: ipcidr, interval: 43200, format: mrs}
#RuleSet_ipcidr_text: &RuleSet_ipcidr_text {type: http, behavior: ipcidr, interval: 43200, format: text}

rule-providers:
#è‡ªå®šä¹‰Provider
  private:
    <<: *RuleSet_classical_text
    url: https://raw.githubusercontent.com/nugent1a/Clash-Rules/refs/heads/main/Ruleset/private.list

rules:
#QUICé˜»æ–­
  - AND,((NETWORK,UDP),(DST-PORT,443)),REJECT
#é¿å… DNS æ±¡æŸ“å¯¼è‡´çš„è¯¯åˆ¤
  - IP-CIDR,223.5.5.5/32,DIRECT,no-resolve
  - IP-CIDR,223.6.6.6/32,DIRECT,no-resolve
#èŠ‚ç‚¹é€‰æ‹©_é«˜ä¼˜å…ˆçº§
  - RULE-SET,private,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,upai,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,ipip,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,github,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
#AI
  - GEOSITE,category-ai-chat-!cn,ğŸ’¡ AI
#Crypto
  - GEOSITE,category-cryptocurrency,ğŸª™ Crypto
#18+
  - GEOSITE,category-porn,ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
#Google
  - GEOSITE,google,ğŸ€ Google
  - GEOIP,google,ğŸ€ Google,no-resolve
  - GEOSITE,youtube,ğŸ€ Google
#å¾®è½¯æœåŠ¡
  - GEOSITE,microsoft,ğŸªŸ å¾®è½¯æœåŠ¡
#è‹¹æœæœåŠ¡
  - GEOSITE,apple,ğŸ è‹¹æœæœåŠ¡
#èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,x,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,telegram,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,tiktok,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,facebook,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,reddit,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,discord,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,netflix,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,disney,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,spotify,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,docker,ğŸ”° èŠ‚ç‚¹é€‰æ‹©

  # IP è¾…åŠ©è§„åˆ™
  - GEOIP,twitter,ğŸ”° èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - GEOIP,telegram,ğŸ”° èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - GEOIP,netflix,ğŸ”° èŠ‚ç‚¹é€‰æ‹©,no-resolve

  # GFW åˆ—è¡¨ (å…œåº•å¤§åå•)
  - GEOSITE,gfw,ğŸ”° èŠ‚ç‚¹é€‰æ‹©

  # æœ€åçš„éå›½å†… IP å…œåº•
  - GEOSITE,geolocation-!cn,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
