# NodeParam é”šç‚¹
NodeParam: &NodeParam {type: http, interval: 3600, health-check: {enable: true, url: 'https://www.gstatic.com/generate_204', interval: 300}}

proxy-providers:
  Fusion:
    <<: *NodeParam
    url: "https://www.nugent.cn:7445/nugent1a/download/collection/Private"
  Guise:
    <<: *NodeParam
    url: 'https://www.nugent.cn:7445/nugent1a/download/Guise' 

# å…¨å±€é…ç½® 
mixed-port: 7890
allow-lan: true
bind-address: "*"
unified-delay: true
tcp-concurrent: true
log-level: error
ipv6: true
keep-alive-idle: 600
keep-alive-interval: 15
profile:
  store-selected: true
  store-fake-ip: true
global-client-fingerprint: chrome

#GeoX
geodata-mode: true
geodata-loader: standard
geo-auto-update: true
geo-update-interval: 12
geox-url:
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country.mmdb"
  asn: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb"

# å—…æŽ¢
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"

# å…¥ç«™
tun:
  enable: true
  stack: mixed
  device: utun
  auto-route: false
  auto-redirect: false
  auto-detect-interface: false
  dns-hijack: ["any:53", "tcp://any:53"]

# DNSæ¨¡å—
dns:
  enable: true
  cache-algorithm: arc
  prefer-h3: false
  ipv6: true
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  nameserver-policy:
    "geosite:cn,private":
    #å±±ä¸œè”é€šDNS
      - 202.102.128.68
      - 202.102.134.68
    #å…¬å…±DNS
      - 119.29.29.29
      - 223.5.5.5

  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"

proxy-groups:

  - name: ðŸ”° èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies: [DIRECT, ðŸš€ æ‰‹åŠ¨åˆ‡æ¢, ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ðŸ‡¨ðŸ‡³ å°æ¹¾èŠ‚ç‚¹, ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ðŸ‡ªðŸ‡º æ¬§æ´²èŠ‚ç‚¹, ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹]
      
  - name: ðŸš€ æ‰‹åŠ¨åˆ‡æ¢
    type: select
    proxies: [DIRECT]
    use:
      - Fusion

  - name: ðŸ’¡ AI
    type: select
    proxies: [DIRECT, ðŸ”° èŠ‚ç‚¹é€‰æ‹©, ðŸš€ æ‰‹åŠ¨åˆ‡æ¢, ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ðŸ‡¨ðŸ‡³ å°æ¹¾èŠ‚ç‚¹, ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ðŸ‡ªðŸ‡º æ¬§æ´²èŠ‚ç‚¹, ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹]

  - name: ðŸ€ Google
    type: select
    proxies: [DIRECT, ðŸ”° èŠ‚ç‚¹é€‰æ‹©, ðŸš€ æ‰‹åŠ¨åˆ‡æ¢, ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ðŸ‡¨ðŸ‡³ å°æ¹¾èŠ‚ç‚¹, ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ðŸ‡ªðŸ‡º æ¬§æ´²èŠ‚ç‚¹, ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹]

  - name: ðŸª™ Crypto
    type: select
    proxies: [DIRECT, ðŸ”° èŠ‚ç‚¹é€‰æ‹©, ðŸš€ æ‰‹åŠ¨åˆ‡æ¢, ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ðŸ‡¨ðŸ‡³ å°æ¹¾èŠ‚ç‚¹, ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ðŸ‡ªðŸ‡º æ¬§æ´²èŠ‚ç‚¹, ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹]

  - name:  ðŸŽ­ ä¼ªè£…
    type: select
    proxies: [DIRECT, ðŸ”° èŠ‚ç‚¹é€‰æ‹©, ðŸš€ æ‰‹åŠ¨åˆ‡æ¢]
    use:
      - Guise

  - name: ðŸªŸ å¾®è½¯æœåŠ¡
    type: select
    proxies: [DIRECT, ðŸ”° èŠ‚ç‚¹é€‰æ‹©, ðŸš€ æ‰‹åŠ¨åˆ‡æ¢, ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ðŸ‡¨ðŸ‡³ å°æ¹¾èŠ‚ç‚¹, ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ðŸ‡ªðŸ‡º æ¬§æ´²èŠ‚ç‚¹, ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹]

  - name: ðŸŽ è‹¹æžœæœåŠ¡
    type: select
    proxies: [DIRECT, ðŸ”° èŠ‚ç‚¹é€‰æ‹©, ðŸš€ æ‰‹åŠ¨åˆ‡æ¢, ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ðŸ‡¨ðŸ‡³ å°æ¹¾èŠ‚ç‚¹, ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ðŸ‡ªðŸ‡º æ¬§æ´²èŠ‚ç‚¹, ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹]

  - name: ðŸŽ¯ å…¨çƒç›´è¿ž
    type: select
    proxies: [DIRECT, ðŸ”° èŠ‚ç‚¹é€‰æ‹©, ðŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  - name: ðŸ”€ å›žé€€è·¯ç”±
    type: select
    proxies: [DIRECT, ðŸ”° èŠ‚ç‚¹é€‰æ‹©, ðŸš€ æ‰‹åŠ¨åˆ‡æ¢]

  - name: ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: url-test
    include-all: true
    tolerance: 50
    interval: 300
    filter: "(æ¸¯|HK|hk|Hong Kong|HongKong|hongkong)"

  - name: ðŸ‡¨ðŸ‡³ å°æ¹¾èŠ‚ç‚¹
    type: url-test
    include-all: true
    tolerance: 50
    interval: 300
    filter: "(å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan)"

  - name: ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
    type: select
    include-all: true
    tolerance: 50
    interval: 300
    filter: "^(?!.*(0\\.5å€çŽ‡|0\\.5x|0\\.5å€|å€çŽ‡0\\.5x)).*(æ–°åŠ å¡|å¡|ç‹®åŸŽ|SG|Singapore).*$"

  - name: ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    include-all: true
    tolerance: 50
    interval: 300
    filter: "(æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼çŽ‰|æ²ªæ—¥|æ·±æ—¥|JP|Japan)"

  - name: ðŸ‡ªðŸ‡º æ¬§æ´²èŠ‚ç‚¹
    type: url-test
    include-all: true
    tolerance: 50
    interval: 300
    filter: "(?i)(EU|å¾·å›½|Germany|DE|æ³•å›½|France|FR|è‹±å›½|UK|è·å…°|Netherlands|NL|è¥¿ç­ç‰™|Spain|ç‘žå£«|Switzerland|ç‘žå…¸|Sweden|å¸Œè…Š|Greece|ä¿„ç½—æ–¯|Russia|RU|èŽ«æ–¯ç§‘|Moscow|åœŸè€³å…¶|Turkey)"

  - name: ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹
    type: url-test
    include-all: true
    tolerance: 150
    interval: 300
    filter: "(ç¾Ž|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸŽ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡ž|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States)"

### è§„åˆ™é›†é”šç‚¹
RuleSet_classical_text: &RuleSet_classical_text {type: http, behavior: classical, interval: 43200, format: text}
RuleSet_domain_mrs: &RuleSet_domain_mrs {type: http, behavior: domain, interval: 43200, format: mrs}
RuleSet_domain_text: &RuleSet_domain_text {type: http, behavior: domain, interval: 43200, format: text}
RuleSet_ipcidr_mrs: &RuleSet_ipcidr_mrs {type: http, behavior: ipcidr, interval: 43200, format: mrs}
RuleSet_ipcidr_text: &RuleSet_ipcidr_text {type: http, behavior: ipcidr, interval: 43200, format: text}

rule-providers:
#è‡ªå®šä¹‰Provider
  private:
    <<: *RuleSet_classical_text
    url: "https://raw.githubusercontent.com/nugent1a/Clash-Rules/refs/heads/main/Ruleset/private.list"

rules:
#QUICé˜»æ–­
  - AND,((NETWORK,UDP),(DST-PORT,443)),REJECT
#é¿å… DNS æ±¡æŸ“å¯¼è‡´çš„è¯¯åˆ¤
  - IP-CIDR,223.5.5.5/32,DIRECT,no-resolve
  - IP-CIDR,223.6.6.6/32,DIRECT,no-resolve
#åŽ»å¹¿å‘Š
  - GEOSITE,category-ads-all,REJECT
#èŠ‚ç‚¹é€‰æ‹©_é«˜ä¼˜å…ˆçº§
  - RULE-SET,private,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,upai,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,ipip,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,github,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
#AI
  - GEOSITE,category-ai-chat-!cn,ðŸ’¡ AI
#Crypto
  - GEOSITE,category-cryptocurrency,ðŸª™ Crypto
#18+
  - GEOSITE,category-porn,ðŸš€ æ‰‹åŠ¨åˆ‡æ¢
#Google
  - GEOSITE,google,ðŸ€ Google
  - GEOIP,google,ðŸ€ Google,no-resolve
  - GEOSITE,youtube,ðŸ€ Google
#å¾®è½¯æœåŠ¡
  - GEOSITE,microsoft,ðŸªŸ å¾®è½¯æœåŠ¡
#è‹¹æžœæœåŠ¡
  - GEOSITE,apple,ðŸŽ è‹¹æžœæœåŠ¡
#èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,x,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,telegram,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,tiktok,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,facebook,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,reddit,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,discord,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,netflix,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,disney,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,spotify,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,docker,ðŸ”° èŠ‚ç‚¹é€‰æ‹©

  # IP è¾…åŠ©è§„åˆ™
  - GEOIP,twitter,ðŸ”° èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - GEOIP,telegram,ðŸ”° èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - GEOIP,netflix,ðŸ”° èŠ‚ç‚¹é€‰æ‹©,no-resolve

  # GFW åˆ—è¡¨ (å…œåº•å¤§åå•)
  - GEOSITE,gfw,ðŸ”° èŠ‚ç‚¹é€‰æ‹©

  # æœ€åŽçš„éžå›½å†… IP å…œåº•
  - GEOSITE,geolocation-!cn,ðŸ”° èŠ‚ç‚¹é€‰æ‹©
#ä¼ªè£…
  - GEOSITE,douyin,ðŸŽ­ ä¼ªè£…
  - GEOSITE,bilibili,ðŸŽ­ ä¼ªè£…
  - GEOSITE,sina,ðŸŽ­ ä¼ªè£…
  - GEOSITE,xiaohongshu,ðŸŽ­ ä¼ªè£…
  - GEOSITE,zhihu,ðŸŽ­ ä¼ªè£…
#ç›´è¿ž
  - GEOSITE,private,ðŸŽ¯ å…¨çƒç›´è¿ž
  - GEOIP,private,ðŸŽ¯ å…¨çƒç›´è¿ž,no-resolve
  # ä¸­å›½å¤§é™†
  - GEOSITE,CN,ðŸŽ¯ å…¨çƒç›´è¿ž
  - GEOIP,CN,ðŸŽ¯ å…¨çƒç›´è¿ž,no-resolve
  - GEOIP,lan,ðŸŽ¯ å…¨çƒç›´è¿ž,no-resolve
  - MATCH,ðŸ”€ å›žé€€è·¯ç”±